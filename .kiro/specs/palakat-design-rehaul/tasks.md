# Implementation Plan

- [x] 1. Implement unified color system
  - [x] 1.1 Refactor color_constants.dart with monochromatic teal palette
    - Update BaseColor class to use teal as primary with full 50-900 shade scale
    - Add neutral palette with teal undertone
    - Consolidate semantic colors (success uses teal, error stays red)
    - Remove redundant color definitions that conflict with monochromatic approach
    - Maintain backward compatibility by preserving existing constant names
    - _Requirements: 1.1, 1.2, 1.3, 6.1, 6.2, 6.3, 6.5_
  - [ ]* 1.2 Write property test for MaterialColor shade completeness
    - **Property 7: MaterialColor Shade Completeness**
    - **Validates: Requirements 6.2**
  - [x] 1.3 Update theme.dart to use new color system
    - Update buildAppTheme() to use ColorScheme.fromSeed with teal primary
    - Ensure component themes use the new color palette
    - _Requirements: 1.4, 1.5_

- [x] 2. Create operation data models
  - [x] 2.1 Create OperationCategory and OperationItem Freezed models
    - Create operation_models.dart with @freezed annotations
    - OperationCategory: id, title, icon, operations list, isExpanded
    - OperationItem: id, title, description, icon, routeName, routeParams, isEnabled
    - Run build_runner to generate freezed files
    - _Requirements: 2.2, 4.1, 4.2, 4.3_
  - [ ]* 2.2 Write property test for operation item completeness
    - **Property 5: Operation Item Completeness**
    - **Validates: Requirements 5.3**
  - [ ]* 2.3 Write property test for operation category membership
    - **Property 2: Operation Category Membership**
    - **Validates: Requirements 2.2**

- [x] 3. Checkpoint - Ensure all tests pass
  - Ensure all tests pass, ask the user if questions arise.

- [x] 4. Refactor operations controller and state
  - [x] 4.1 Update OperationsState with category support
    - Add categories list to state
    - Add categoryExpansionState map for tracking expanded categories
    - Update state to use new OperationCategory model
    - _Requirements: 2.2, 4.5_
  - [x] 4.2 Implement category expansion logic in controller
    - Add toggleCategoryExpansion method
    - Implement buildCategories method to create category structure
    - Filter operations based on user's membership positions
    - _Requirements: 4.4, 4.5_
  - [ ]* 4.3 Write property test for category expansion toggle
    - **Property 4: Category Expansion Toggle**
    - **Validates: Requirements 4.4, 4.5**

- [x] 5. Create operation category widgets
  - [x] 5.1 Create OperationCategoryCard widget
    - Implement collapsible card with ExpansionTile pattern
    - Use teal primary color for header
    - Add expand/collapse icon animation
    - Limit visible items to 3 when collapsed
    - _Requirements: 2.3, 2.4, 3.1, 3.2_
  - [ ]* 5.2 Write property test for collapsed category item limit
    - **Property 3: Collapsed Category Item Limit**
    - **Validates: Requirements 2.3, 2.4**
  - [x] 5.3 Create OperationItemCard widget
    - Display title, description, and icon
    - Use neutral surface colors for background
    - Add ripple effect with primary color at 10% opacity
    - Implement disabled state with reduced opacity
    - Add 16px border radius and subtle shadow
    - _Requirements: 3.2, 3.3, 5.1, 5.3, 5.4_
  - [ ]* 5.4 Write property test for disabled operation state
    - **Property 6: Disabled Operation State**
    - **Validates: Requirements 5.4**

- [ ] 6. Checkpoint - Ensure all tests pass
  - Ensure all tests pass, ask the user if questions arise.

- [x] 7. Implement responsive layout
  - [x] 7.1 Create ResponsiveOperationGrid widget
    - Use LayoutBuilder to detect screen width
    - Display 2 columns when width > 600px
    - Display 1 column when width <= 600px
    - Ensure minimum touch target of 48x48 pixels
    - _Requirements: 7.1, 7.2, 7.3, 7.4_
  - [ ]* 7.2 Write property test for responsive column count
    - **Property 8: Responsive Column Count**
    - **Validates: Requirements 7.2, 7.3**
  - [ ]* 7.3 Write property test for touch target minimum size
    - **Property 9: Touch Target Minimum Size**
    - **Validates: Requirements 7.4**

- [x] 8. Redesign operations screen
  - [x] 8.1 Update PositionSummaryCard widget
    - Use new color system (teal accents, neutral backgrounds)
    - Display position count badge
    - Show position chips with consistent styling
    - _Requirements: 2.1, 3.1, 3.2_
  - [ ]* 8.2 Write property test for position summary display
    - **Property 1: Position Summary Display Consistency**
    - **Validates: Requirements 2.1**
  - [x] 8.3 Refactor OperationsScreen with new components
    - Replace current layout with category-based structure
    - Integrate OperationCategoryCard for each category
    - Use ResponsiveOperationGrid for operation cards
    - Implement empty state when no operations available
    - Apply 8px grid spacing throughout
    - _Requirements: 2.1, 2.2, 2.3, 2.5, 3.4_
  - [ ]* 8.4 Write property test for spacing grid alignment
    - **Property 10: Spacing Grid Alignment**
    - **Validates: Requirements 3.4**

- [x] 9. Update dependent widgets and screens
  - [x] 9.1 Update CardPublishingOperationWidget to use new colors
    - Replace gradient with solid teal primary color
    - Use neutral colors for secondary elements
    - Maintain existing functionality
    - _Requirements: 1.1, 3.1_
  - [x] 9.2 Update ReportButtonWidget to use new colors
    - Replace hardcoded colors with teal palette variations
    - Use semantic colors appropriately
    - _Requirements: 1.1, 1.3_
  - [x] 9.3 Update MembershipPositionsCardWidget styling
    - Apply new color system
    - Use consistent border radius and shadows
    - _Requirements: 3.2, 3.3_

- [x] 10. Final integration and cleanup
  - [x] 10.1 Remove deprecated color constants
    - Identify and remove unused color definitions
    - Update any remaining hardcoded colors
    - _Requirements: 6.3_
  - [x] 10.2 Verify color consistency across app
    - Review all screens for color system compliance
    - Fix any remaining color inconsistencies
    - _Requirements: 1.1, 1.4, 1.5_

- [x] 11. Final Checkpoint - Ensure all tests pass
  - Ensure all tests pass, ask the user if questions arise.
